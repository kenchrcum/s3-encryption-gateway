# Milestone v1.0 â€” Issue Tracker and Implementation Guide

This document tracks issues for v1.0 with implementation guides and validation criteria derived from `docs/ROADMAP.md`.

## Scope and Goals
- Security/Crypto: Full KMS production readiness (HA, caching, failure modes); sensitive data zeroization and constant-time comparisons audit
- S3 Compatibility: Broad feature parity (tagging, ACLs, lifecycle headers passthrough); SDK/tool compatibility certification matrix
- Performance & Scalability: Horizontal scale guidance; tuned HPA/SLOs; high-throughput benchmarks
- Observability: Turnkey dashboards (Grafana) and alerting rules
- Operations: Multi-arch images, SBOMs, provenance (SLSA); Helm chart on Artifact Hub with automated checks
- Ecosystem: Additional backends via shims (GCS, Azure Blob, filesystem); CLI for local testing (presign, quick put/get)

## Milestone Acceptance Criteria
- Compatibility certification matrix completed for targeted SDKs/tools.
- Published dashboards and alerting rules; documented SLOs and autoscaling guidance.
- Supply-chain artifacts for releases (multi-arch, SBOM, provenance) available.

Labels: `milestone:v1.0`, `area:kms`, `area:compat`, `area:perf`, `area:observability`, `area:ops`, `area:ecosystem`.

---

## [V1.0-KMS-1] KMS Production Readiness
- Owner: Crypto
- Priority: P0

### Summary
Harden KMS mode for production: HA, caching, retry/failure modes, and observability.

### Implementation Guide
- [ ] Add connection pooling, backoff, circuit breaker patterns.
- [ ] Cache tuning (DEK wrap/unwrap) with TTLs and eviction metrics.
- [ ] Health check endpoints for AWS KMS and Vault Transit adapters (Cosmian already has health checks in v0.5).
- [ ] Runbooks for KMS outages; degraded modes clearly documented.

### Tests
- Chaos tests: KMS timeouts/outages; cache hit/miss under load

### Definition of Done
- [ ] Stable behavior under failure; clear metrics and alerts
- [ ] Health checks implemented for all KMS providers (Cosmian complete in v0.5)

---

## [V1.0-KMS-2] AWS KMS Adapter
- Owner: Crypto
- Priority: P1

### Summary
Implement AWS KMS adapter using AWS SDK v2 for envelope encryption. Deferred from v0.5 due to cloud provider access requirements for testing.

### Affected
- `internal/crypto/keymanager_aws.go` (new)
- `internal/config/config.go`
- `docs/KMS_COMPATIBILITY.md`

### Implementation Guide
- [ ] Create `keymanager_aws.go` implementing `KeyManager` interface.
- [ ] Use AWS SDK v2 (`github.com/aws/aws-sdk-go-v2/service/kms`).
- [ ] Implement `Encrypt`/`Decrypt` operations for key wrapping.
- [ ] Support key aliases, ARNs, and key versioning.
- [ ] Add configuration in `config.go` (endpoint, region, credentials, timeouts).
- [ ] Implement dual-read window support for key rotation.
- [ ] Add health check implementation.

### Security Considerations
- Use AWS IAM for authentication; support KMS key policies.
- Do not log key material or ARNs in production logs.
- Zeroize DEKs after use.

### Tests
- Unit: mock AWS KMS client; failure modes; rotation paths.
- Integration: AWS KMS (requires AWS account with KMS access).

### Definition of Done
- [ ] Encrypt/decrypt successful via AWS KMS.
- [ ] Key rotation with dual-read window works.
- [ ] Configuration and credentials properly handled.
- [ ] Integration tests pass (may require manual AWS setup).

---

## [V1.0-KMS-3] HashiCorp Vault Transit Adapter
- Owner: Crypto
- Priority: P1

### Summary
Implement HashiCorp Vault Transit adapter for envelope encryption. Deferred from v0.5 due to Enterprise license requirements for Transit engine.

### Affected
- `internal/crypto/keymanager_vault.go` (new)
- `internal/config/config.go`
- `docs/KMS_COMPATIBILITY.md`

### Implementation Guide
- [ ] Create `keymanager_vault.go` implementing `KeyManager` interface.
- [ ] Use Vault API client (`github.com/hashicorp/vault/api`).
- [ ] Implement Transit engine encrypt/decrypt operations.
- [ ] Support key versioning via Vault's key rotation.
- [ ] Add configuration in `config.go` (endpoint, auth method, transit path, timeouts).
- [ ] Support multiple auth methods (token, AppRole, AWS, etc.).
- [ ] Implement dual-read window support for key rotation.
- [ ] Add health check implementation.

### Security Considerations
- Support Vault TLS certificates and token authentication.
- Do not log tokens or key material.
- Zeroize DEKs after use.

### Tests
- Unit: mock Vault API client; failure modes; rotation paths.
- Integration: Vault Transit (requires Vault Enterprise or dev server with Transit enabled).

### Definition of Done
- [ ] Encrypt/decrypt successful via Vault Transit.
- [ ] Key rotation with dual-read window works.
- [ ] Multiple auth methods supported.
- [ ] Integration tests pass (may require manual Vault setup).

---

## [V1.0-SEC-1] Sensitive Data Zeroization & Constant-Time Audit
- Owner: Security
- Priority: P1

### Summary
Audit and implement zeroization paths; ensure constant-time compares where applicable.

### Affected
- `internal/crypto/*`
- `internal/middleware/security.go`

### Implementation Guide
- [ ] Identify all sensitive buffers; add zeroization.
- [ ] Replace string compares with constant-time functions as needed.

### Definition of Done
- [ ] Audit checklist complete; tests cover zeroization where practical

---

## [V1.0-S3-1] Broad Feature Parity
- Owner: API
- Priority: P1

### Summary
Tagging, ACLs, lifecycle header passthrough behavior documented and tested.

### Implementation Guide
- [ ] Confirm passthrough mappings and provider quirks; add conformance tests.

### Definition of Done
- [ ] Feature matrix green for priority features

---

## [V1.0-COMPAT-1] SDK/Tool Compatibility Matrix
- Owner: QA
- Priority: P0

### Summary
Certify compatibility with major SDKs/tools.

### Implementation Guide
- [ ] Define matrix (AWS SDKs, boto3, minio clients, awscli, s5cmd, rclone).
- [ ] Automated smoke tests per SDK/tool.

### Definition of Done
- [ ] Matrix published with pass/fail and caveats

---

## [V1.0-PERF-1] Scale & Throughput Guidance
- Owner: Perf/Ops
- Priority: P1

### Summary
Publish guidance for horizontal scaling, tuned HPA, and SLOs.

### Implementation Guide
- [ ] Load test profiles; CPU/memory thresholds; autoscaling configs.

### Definition of Done
- [ ] Documented playbooks and Helm examples

---

## [V1.0-PERF-2] High-throughput Benchmarks
- Owner: Perf
- Priority: P2

### Summary
Publish high-throughput benchmarks with results and methodology.

### Definition of Done
- [ ] Benchmarks reproducible; results in docs

---

## [V1.0-OBS-1] Turnkey Dashboards & Alerting
- Owner: Observability
- Priority: P1

### Summary
Provide Grafana dashboards and alert rules for critical metrics.

### Implementation Guide
- [ ] Dashboards as JSON; alerts via PrometheusRule examples.

### Definition of Done
- [ ] Dashboards render; alerts trigger in simulations

---

## [V1.0-OPS-1] Supply-chain & Publishing
- Owner: Release/Ops
- Priority: P0

### Summary
Produce multi-arch images, SBOMs, provenance (SLSA); publish Helm chart to Artifact Hub with automated checks.

### Implementation Guide
- [ ] CI buildx multi-arch; cosign attestations; SBOM generation.
- [ ] Chart metadata and CI checks for Artifact Hub.

### Definition of Done
- [ ] Artifacts published and verifiable; chart listed

---

## [V1.0-ECOSYS-1] Additional Backends via Shims
- Owner: Ecosystem
- Priority: P2

### Summary
Provide shims for GCS, Azure Blob, and local filesystem (dev).

### Implementation Guide
- [ ] Minimal adapters mapping S3 semantics; doc caveats.

### Definition of Done
- [ ] Basic put/get/list interop demonstrated

---

## [V1.0-CLI-1] Developer CLI
- Owner: DevEx
- Priority: P3

### Summary
CLI for presign and quick put/get for local testing.

### Definition of Done
- [ ] CLI binary with core commands; docs updated

---

## Tracking Checklist (Milestone Level)
- [ ] All P0/P1 closed
- [ ] Supply-chain artifacts published
- [ ] Dashboards and alerts in place
- [ ] Compatibility matrix published
